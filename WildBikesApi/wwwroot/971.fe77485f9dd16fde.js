"use strict";(self.webpackChunkwild_bikes=self.webpackChunkwild_bikes||[]).push([[971],{971:(J,u,i)=>{i.r(u),i.d(u,{SigningComponent:()=>s,SigningModule:()=>r});var p=i(3656),f=i(5533),n=i(4650),v=i(7120),l=i(3456),h=i(1481),M=i(3122),_=i(6895),d=i(4006),x=i(4859),C=i(9549),O=i(6709),P=i(4144),S=i(1572),Z=i(4850);function T(e,t){1&e&&(n.TgZ(0,"div",3),n._UZ(1,"mat-progress-spinner",4),n.qZA())}function y(e,t){if(1&e){const o=n.EpF();n.TgZ(0,"div",10),n._UZ(1,"app-signature-pad"),n.TgZ(2,"div",11)(3,"div",12)(4,"mat-form-field")(5,"mat-label"),n._uU(6,"Email"),n.qZA(),n.TgZ(7,"input",13),n.NdJ("ngModelChange",function(c){n.CHM(o);const m=n.oxw(2);return n.KtG(m.email=c)}),n.qZA()(),n.TgZ(8,"mat-checkbox",14),n.NdJ("ngModelChange",function(c){n.CHM(o);const m=n.oxw(2);return n.KtG(m.sendToEmail=c)}),n._uU(9,"Send to email"),n.qZA()(),n.TgZ(10,"div",15)(11,"button",16),n.NdJ("click",function(){n.CHM(o);const c=n.oxw(2);return n.KtG(c.onClear())}),n._uU(12,"Clear"),n.qZA(),n.TgZ(13,"button",17),n.NdJ("click",function(){n.CHM(o);const c=n.oxw(2);return n.KtG(c.onSave())}),n._uU(14,"Save"),n.qZA()()()()}if(2&e){const o=n.oxw(2);n.xp6(4),n.Udp("width",327,"px"),n.xp6(3),n.Q6J("ngModel",o.email),n.xp6(1),n.Q6J("ngModel",o.sendToEmail)}}function b(e,t){1&e&&(n.TgZ(0,"div",18),n.O4$(),n.TgZ(1,"svg",19),n._UZ(2,"g",20)(3,"g",21),n.TgZ(4,"g",22),n._UZ(5,"path",23),n.qZA()(),n.kcU(),n.TgZ(6,"div",24),n._uU(7," Thank you! "),n.qZA()())}function U(e,t){if(1&e&&(n.TgZ(0,"div",5),n._UZ(1,"div",6)(2,"mat-divider"),n.TgZ(3,"div",7),n.YNc(4,y,15,4,"div",8),n.YNc(5,b,8,0,"div",9),n.qZA()()),2&e){const o=n.oxw();n.xp6(1),n.Q6J("innerHtml",o.document,n.oJD),n.xp6(3),n.Q6J("ngIf",!o.isSigned),n.xp6(1),n.Q6J("ngIf",o.isSigned)}}class s{constructor(t,o,g){this.signingService=t,this.activatedRoute=o,this.sanitizer=g,this.isLoading=!1,this.isSigned=!1,this.bookingUuid=this.activatedRoute.snapshot.paramMap.get(p.b.BookingUuid),this.email=null,this.sendToEmail=!0}ngOnInit(){this.loadDocument(),document.body.style.minWidth="850px"}onSave(){const t=this.signaturePadComponent.getSignatureAndClear();this.signBooking(t)}onClear(){this.signaturePadComponent.clear()}loadDocument(){this.isLoading=!0,this.signingService.document(this.bookingUuid).subscribe(t=>{this.document=this.sanitizer.bypassSecurityTrustHtml(t.document),this.isSigned=t.isSigned,this.isLoading=!1})}signBooking(t){this.isLoading=!0,this.signingService.sign({uuid:this.bookingUuid,email:this.email&&this.sendToEmail?this.email:null,signature:t}).subscribe(()=>{this.loadDocument()})}}s.\u0275fac=function(t){return new(t||s)(n.Y36(v.n),n.Y36(l.gz),n.Y36(h.H7))},s.\u0275cmp=n.Xpm({type:s,selectors:[["app-signing"]],viewQuery:function(t,o){if(1&t&&n.Gf(f.l,5),2&t){let g;n.iGM(g=n.CRH())&&(o.signaturePadComponent=g.first)}},decls:7,vars:2,consts:[[1,"container"],["class","loader",4,"ngIf"],["class","content",4,"ngIf"],[1,"loader"],["color","primary","mode","indeterminate",1,"example-margin"],[1,"content"],[3,"innerHtml"],[1,"footer"],["class","signing-card",4,"ngIf"],["class","signed-card",4,"ngIf"],[1,"signing-card"],[1,"controls"],[1,"email-section"],["matInput","","email","",3,"ngModel","ngModelChange"],["color","primary",3,"ngModel","ngModelChange"],[1,"button-group"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","primary",3,"click"],[1,"signed-card"],["viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["id","SVGRepo_bgCarrier","stroke-width","0"],["id","SVGRepo_tracerCarrier","stroke-linecap","round","stroke-linejoin","round"],["id","SVGRepo_iconCarrier"],["d","M16 3.93552C14.795 3.33671 13.4368 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21C16.9706 21 21 16.9706 21 12C21 11.662 20.9814 11.3283 20.9451 11M21 5L12 14L9 11","stroke","#08a43c","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"message"]],template:function(t,o){1&t&&(n.TgZ(0,"div",0),n.YNc(1,T,2,0,"div",1),n.TgZ(2,"div"),n._uU(3,"\xa0"),n.qZA(),n.YNc(4,U,6,3,"div",2),n.TgZ(5,"div"),n._uU(6,"\xa0"),n.qZA()()),2&t&&(n.xp6(1),n.Q6J("ngIf",o.isLoading),n.xp6(3),n.Q6J("ngIf",o.document))},dependencies:[M.l,_.O5,d.Fj,d.JJ,d.on,d.On,x.lW,C.KE,C.hX,O.oG,P.Nt,S.Ou,Z.d],styles:[".container[_ngcontent-%COMP%]{min-height:100%;background-color:gray}.container[_ngcontent-%COMP%] > .loader[_ngcontent-%COMP%]{background:rgba(255,255,255,.8);position:fixed;min-width:100%;height:100%;display:flex;align-items:center;justify-content:center;z-index:100}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{width:850px;margin:25px auto;background-color:#fff}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .footer[_ngcontent-%COMP%]{padding:10px;height:326px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .footer[_ngcontent-%COMP%] > .signing-card[_ngcontent-%COMP%] > .controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .footer[_ngcontent-%COMP%] > .signing-card[_ngcontent-%COMP%] > .controls[_ngcontent-%COMP%] > .button-group[_ngcontent-%COMP%]{display:flex;gap:10px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .footer[_ngcontent-%COMP%] > .signing-card[_ngcontent-%COMP%] > .controls[_ngcontent-%COMP%] > .email-section[_ngcontent-%COMP%]{display:flex;align-items:center}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .footer[_ngcontent-%COMP%] > .signing-card[_ngcontent-%COMP%] > .controls[_ngcontent-%COMP%] > .email-section[_ngcontent-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .footer[_ngcontent-%COMP%] > .signed-card[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center;justify-content:center;font-size:30px;gap:20px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .footer[_ngcontent-%COMP%] > .signed-card[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:100px}"]});var k=i(4677);const A=[{path:`:${p.b.BookingUuid}`,component:s}];class a{}a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=n.oAB({type:a}),a.\u0275inj=n.cJS({imports:[l.Bz.forChild(A),l.Bz]});class r{}r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=n.oAB({type:r}),r.\u0275inj=n.cJS({imports:[k.m,a]})}}]);