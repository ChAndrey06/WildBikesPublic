"use strict";(self.webpackChunkwild_bikes=self.webpackChunkwild_bikes||[]).push([[449],{7449:(x,b,i)=>{i.r(b),i.d(b,{DetailsComponent:()=>l,DetailsModule:()=>c});var v=i(3656),A=i(6113),B=i(4939),e=i(4650),y=i(8229);class m{constructor(t){this.apiService=t}create(t){return this.apiService.post("api/booking",t)}update(t,n){return this.apiService.put(`api/booking/${t}`,n)}getByUuid(t){return this.apiService.get(`api/booking/${t}`)}}m.\u0275fac=function(t){return new(t||m)(e.LFG(y.s))},m.\u0275prov=e.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"});var h=i(3456),o=i(4006),Z=i(4859),s=i(9549),U=i(4144),I=i(7392),N=i(4425),S=i(6895),g=i(9602),T=i(5113),q=i(3238);function F(a,t){if(1&a&&(e.TgZ(0,"mat-option",23),e._uU(1),e.qZA()),2&a){const n=t.$implicit;e.Q6J("value",n),e.xp6(1),e.hij(" ",n," ")}}class f{constructor(t){this.formBuilder=t,this.saveEvent=new e.vpe,this.helmets=["No","1","2"],this.formGroup=this.formBuilder.group({firstName:[null,o.kI.required],lastName:[null,o.kI.required],dateFrom:[null,o.kI.required],dateTo:[null,o.kI.required],price:[null,o.kI.required],passport:[null,o.kI.required],licenseNumber:[null,o.kI.required],address:[null,o.kI.required],nationality:[null,o.kI.required],helmet:[null,o.kI.required],bikeName:[null,o.kI.required],bikeNumber:[null,[o.kI.required,o.kI.maxLength(10)]],bikeID:[null,o.kI.required],phone:[null,o.kI.required]})}ngOnChanges(t){t.booking&&this.formGroup.patchValue(this.booking)}onSubmit(t){this.saveEvent.emit(t)}}f.\u0275fac=function(t){return new(t||f)(e.Y36(o.qu))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-booking-details-form"]],inputs:{booking:"booking"},outputs:{saveEvent:"saveEvent"},features:[e.TTD],decls:63,vars:5,consts:[[1,"container"],[1,"form",3,"formGroup","ngSubmit"],[1,"form-element"],["matInput","","placeholder","First name","formControlName","firstName"],["matInput","","placeholder","Last name","formControlName","lastName"],["appearance","fill",1,"form-element"],[3,"rangePicker","click"],["matStartDate","","formControlName","dateFrom","placeholder","Start date"],["matEndDate","","formControlName","dateTo","placeholder","End date"],["matIconSuffix","",3,"for"],["picker",""],["type","number","inputmode","decimal","matInput","","placeholder","Price","formControlName","price"],["matInput","","placeholder","Passport","formControlName","passport"],["matInput","","placeholder","License number","formControlName","licenseNumber"],["matInput","","placeholder","Address","formControlName","address"],["matInput","","placeholder","Nationality","formControlName","nationality"],["formControlName","helmet","required",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Bike name","formControlName","bikeName"],["matInput","","placeholder","Bike number","formControlName","bikeNumber"],["type","number","matInput","","placeholder","Bike ID","formControlName","bikeID"],["matInput","","placeholder","Phone","formControlName","phone"],["mat-raised-button","","color","primary","type","submit",1,"button",3,"disabled"],[3,"value"]],template:function(t,n){if(1&t){const r=e.EpF();e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",function(){return n.onSubmit(n.formGroup.value)}),e.TgZ(2,"mat-form-field",2)(3,"mat-label"),e._uU(4,"First name"),e.qZA(),e._UZ(5,"input",3),e.qZA(),e.TgZ(6,"mat-form-field",2)(7,"mat-label"),e._uU(8,"Last name"),e.qZA(),e._UZ(9,"input",4),e.qZA(),e.TgZ(10,"mat-form-field",5)(11,"mat-label"),e._uU(12,"Date range"),e.qZA(),e.TgZ(13,"mat-date-range-input",6),e.NdJ("click",function(){e.CHM(r);const M=e.MAs(18);return e.KtG(M.open())}),e._UZ(14,"input",7)(15,"input",8),e.qZA(),e._UZ(16,"mat-datepicker-toggle",9)(17,"mat-date-range-picker",null,10),e.qZA(),e.TgZ(19,"mat-form-field",2)(20,"mat-label"),e._uU(21,"Price"),e.qZA(),e._UZ(22,"input",11),e.qZA(),e.TgZ(23,"mat-form-field",2)(24,"mat-label"),e._uU(25,"Passport"),e.qZA(),e._UZ(26,"input",12),e.qZA(),e.TgZ(27,"mat-form-field",2)(28,"mat-label"),e._uU(29,"License number"),e.qZA(),e._UZ(30,"input",13),e.qZA(),e.TgZ(31,"mat-form-field",2)(32,"mat-label"),e._uU(33,"Address"),e.qZA(),e._UZ(34,"input",14),e.qZA(),e.TgZ(35,"mat-form-field",2)(36,"mat-label"),e._uU(37,"Nationality"),e.qZA(),e._UZ(38,"input",15),e.qZA(),e.TgZ(39,"mat-form-field",5)(40,"mat-label"),e._uU(41,"Helmet"),e.qZA(),e.TgZ(42,"mat-select",16),e.YNc(43,F,2,2,"mat-option",17),e.qZA()(),e.TgZ(44,"mat-form-field",2)(45,"mat-label"),e._uU(46,"Bike name"),e.qZA(),e._UZ(47,"input",18),e.qZA(),e.TgZ(48,"mat-form-field",2)(49,"mat-label"),e._uU(50,"Bike number"),e.qZA(),e._UZ(51,"input",19),e.qZA(),e.TgZ(52,"mat-form-field",2)(53,"mat-label"),e._uU(54,"Bike ID"),e.qZA(),e._UZ(55,"input",20),e.qZA(),e.TgZ(56,"mat-form-field",2)(57,"mat-label"),e._uU(58,"Phone"),e.qZA(),e._UZ(59,"input",21),e.qZA(),e.TgZ(60,"div",2)(61,"button",22),e._uU(62," Save "),e.qZA()()()()}if(2&t){const r=e.MAs(18);e.xp6(1),e.Q6J("formGroup",n.formGroup),e.xp6(12),e.Q6J("rangePicker",r),e.xp6(3),e.Q6J("for",r),e.xp6(27),e.Q6J("ngForOf",n.helmets),e.xp6(18),e.Q6J("disabled",!n.formGroup.valid)}},dependencies:[S.sg,o._Y,o.Fj,o.wV,o.JJ,o.JL,o.Q7,o.sg,o.u,Z.lW,s.KE,s.hX,s.R9,U.Nt,g.nW,g.wx,g.zY,g.By,g._g,T.gD,q.ey],styles:[".fill-remaining-space[_ngcontent-%COMP%]{flex:1 1 auto}.form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}@media screen and (max-width: 850px){.form[_ngcontent-%COMP%]{max-width:unset}}.form-element[_ngcontent-%COMP%], .button[_ngcontent-%COMP%]{width:100%}"]});class l{constructor(t,n,r){this.bookingService=t,this.activatedRoute=n,this.router=r,this.bookingUuid=this.activatedRoute.snapshot.paramMap.get(v.b.BookingUuid)}ngOnInit(){this.bookingUuid&&this.loadBooking(this.bookingUuid)}onSave(t){const n=()=>{this.router.navigateByUrl(this.bookingSignRoute)};this.booking?this.updateBooking(this.booking.uuid,t,n):this.createBooking(t,n)}loadBooking(t){this.bookingService.getByUuid(t).subscribe(n=>{this.booking=n})}createBooking(t,n){this.bookingService.create(t).subscribe(r=>{this.booking=r,n()})}updateBooking(t,n,r){this.bookingService.update(t,n).subscribe(k=>{this.booking=k,r()})}get bookingSignUrl(){return this.booking?`${location.origin}/${this.bookingSignRoute}`:""}get bookingSignRoute(){return`${B.N.Booking}/${A.d.Signing}/${this.booking.uuid}`}}l.\u0275fac=function(t){return new(t||l)(e.Y36(m),e.Y36(h.gz),e.Y36(h.F0))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-details"]],decls:10,vars:3,consts:[[1,"container"],[1,"row",3,"booking","saveEvent"],[1,"link-field"],["matInput","","disabled","","type","text",3,"ngModel"],["matSuffix","","mat-icon-button","",3,"cdkCopyToClipboard"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div")(2,"app-booking-details-form",1),e.NdJ("saveEvent",function(k){return n.onSave(k)}),e.qZA(),e.TgZ(3,"mat-form-field",2)(4,"mat-label"),e._uU(5,"Booking link"),e.qZA(),e._UZ(6,"input",3),e.TgZ(7,"button",4)(8,"mat-icon"),e._uU(9,"content_copy"),e.qZA()()()()()),2&t&&(e.xp6(2),e.Q6J("booking",n.booking),e.xp6(4),e.Q6J("ngModel",n.bookingSignUrl),e.xp6(1),e.Q6J("cdkCopyToClipboard",n.bookingSignUrl))},dependencies:[o.Fj,o.JJ,o.On,Z.RK,s.KE,s.hX,s.R9,U.Nt,I.Hw,N.i3,f],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:10px}.link-field[_ngcontent-%COMP%]{margin-top:20px;width:100%}"]});var C=i(4677);const D=[{path:`:${v.b.BookingUuid}`,component:l},{path:"",component:l}];class u{}u.\u0275fac=function(t){return new(t||u)},u.\u0275mod=e.oAB({type:u}),u.\u0275inj=e.cJS({imports:[h.Bz.forChild(D),h.Bz]});class p{}p.\u0275fac=function(t){return new(t||p)},p.\u0275mod=e.oAB({type:p}),p.\u0275inj=e.cJS({imports:[C.m]}),i(7120);class d{}d.\u0275fac=function(t){return new(t||d)},d.\u0275mod=e.oAB({type:d}),d.\u0275inj=e.cJS({imports:[p]});var J=i(8277);class c{}c.\u0275fac=function(t){return new(t||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({providers:[{provide:J.o8,useValue:{useUtc:!0}}],imports:[C.m,u,d]})}}]);